truth table considering circular = 0
--------------------------------------------------------
|  d  |  dir  |  carry_in  |  out[7]  |  out[6]  |  ...  |  out[0]  |  carry_out  |
--------------------------------------------------------
|  0  |   0   |     X      |    0     |    0     |  ...  |    0     |      0      |
--------------------------------------------------------
|  1  |   0   |     X      |    0     |    0     |  ...  |    0     |      0      |
--------------------------------------------------------
|  0  |   1   |     0      |  prev[6] |  prev[5] |  ...  |  prev[0] |  prev[7]&0  |
--------------------------------------------------------
|  1  |   1   |     0      |  prev[6] |  prev[5] |  ...  |  prev[0] |  prev[7]&0  |
--------------------------------------------------------
|  0  |   0   |     1      |  prev[7] |  prev[6] |  ...  |  prev[1] |  prev[0]&1  |
--------------------------------------------------------
|  1  |   0   |     1      |  prev[7] |  prev[6] |  ...  |  prev[1] |  prev[0]&1  |
--------------------------------------------------------
|  0  |   1   |     1      |  prev[7] |  prev[6] |  ...  |  prev[1] |  prev[0]&1  |
--------------------------------------------------------
|  1  |   1   |     1      |  prev[7] |  prev[6] |  ...  |  prev[1] |  prev[0]&1  |
--------------------------------------------------------


truth table considering circular = 1
--------------------------------------------------------
-------------------------------------------------------------------------------------------------
|  d  |  dir  |  carry_in  |  out[7]  |  out[6]  |  out[5]  |  out[4]  |  out[3]  |  out[2]  |  out[1]  |  out[0]  |  carry_out  |
-------------------------------------------------------------------------------------------------
|  0  |   0   |     X      |  prev[6] |  prev[5] |  prev[4] |  prev[3] |  prev[2] |  prev[1] |  prev[0] |  carry_in |  prev[7]&0  |
-------------------------------------------------------------------------------------------------
|  1  |   0   |     X      |  prev[6] |  prev[5] |  prev[4] |  prev[3] |  prev[2] |  prev[1] |  prev[0] |  carry_in |  prev[7]&0  |
-------------------------------------------------------------------------------------------------
|  0  |   1   |     0      |  prev[5] |  prev[4] |  prev[3] |  prev[2] |  prev[1] |  prev[0] |  carry_in |  prev[7]  |  prev[0]&1  |
-------------------------------------------------------------------------------------------------
|  1  |   1   |     0      |  prev[5] |  prev[4] |  prev[3] |  prev[2] |  prev[1] |  prev[0] |  carry_in |  prev[7]  |  prev[0]&1  |
-------------------------------------------------------------------------------------------------
|  0  |   0   |     1      |  prev[7] |  prev[6] |  prev[5] |  prev[4] |  prev[3] |  prev[2] |  prev[1] |  prev[0]  |  prev[7]&0  |
-------------------------------------------------------------------------------------------------
|  1  |   0   |     1      |  prev[7] |  prev[6] |  prev[5] |  prev[4] |  prev[3] |  prev[2] |  prev[1] |  prev[0]  |  prev[7]&0  |
-------------------------------------------------------------------------------------------------
|  0  |   1   |     1      |  prev[6] |  prev[5] |  prev[4] |  prev[3] |  prev[2] |  prev[1] |  prev[0] |  carry_in |  prev[7]&1  |
-------------------------------------------------------------------------------------------------
|  1  |   1   |     1      |  prev[6] |  prev[5] |  prev[4] |  prev[3] |  prev[2] |  prev[1] |  prev[0] |  carry_in |  prev[7]&1  |
-------------------------------------------------------------------------------------------------
Note: prev[i] refers to the value of out[i] in the previous state.




